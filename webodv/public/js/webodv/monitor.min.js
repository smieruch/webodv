$(document).ready(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});if(typeof monitor_process_url!="undefined"){$(".py-4").css("background-color","#89a2b0");$("#marine_id_login_a").hide();var xdata=[];var monitor_date="";var new_hour="00:00";var new_date="";var monitor_date_tmp=[];function monitor_process(){$.ajax({type:"POST",url:monitor_process_url,data:{real_time_from:monitor_date},dataType:"json",cache:"false",func:"monitor_process_url_done",error:function(data){},success:function(data){}})}setInterval(function(){monitor_process()},3e4);var today=new Date;var init_date=new Date(today.getFullYear(),today.getMonth(),today.getDate());if(today.getMonth()+1<10){var addm="0"}else{var addm=""}if(today.getDate()<10){var addd="0"}else{var addd=""}var picker_init=addm+(today.getMonth()+1).toString()+"/"+addd+today.getDate().toString()+"/"+today.getFullYear().toString();monitor_date=today.getFullYear().toString()+"-"+addm+(today.getMonth()+1).toString()+"-"+addd+today.getDate().toString()+" "+new_hour+":00";monitor_process();monitor_date_tmp=picker_init.split("/");$("#date1").datepicker({uiLibrary:"bootstrap4",showOnFocus:false,showRightIcon:true,value:picker_init,close:function(e){},change:function(e){new_date=$(this).datepicker().value();monitor_date_tmp=new_date.split("/");monitor_date=monitor_date_tmp[2].toString()+"-"+monitor_date_tmp[0].toString()+"-"+monitor_date_tmp[1].toString()+" "+new_hour+":00";monitor_process()}});$(".input-group-append").css("background-color","white");$("#hour").on("changed.bs.select",function(){new_hour=$("#hour option:selected").text();monitor_date=monitor_date_tmp[2].toString()+"-"+monitor_date_tmp[0].toString()+"-"+monitor_date_tmp[1].toString()+" "+new_hour+":00";monitor_process()});$(document).ajaxComplete(function(e,xhr,settings){if(settings.func=="monitor_process_url_done"){responseText=JSON.parse(xhr.responseText);xdata={xdate:[],xcpu:[],xmem:[],odvws_instances:[]};$.each(responseText,function(i,e){xdata.xdate.push(e.created_at);xdata.xcpu.push(e.cpu);xdata.xmem.push(e.mem);xdata.odvws_instances.push(e.odvws_instances)});cpu_plot=document.getElementById("cpu");Plotly.newPlot(cpu_plot,[{x:xdata.xdate,y:xdata.xcpu}],{margin:{t:0}});mem_plot=document.getElementById("mem");Plotly.newPlot(mem_plot,[{x:xdata.xdate,y:xdata.xmem}],{margin:{t:0}});odvws_instances_plot=document.getElementById("odvws_instances");Plotly.newPlot(odvws_instances_plot,[{x:xdata.xdate,y:xdata.odvws_instances}],{margin:{t:0}})}})}});